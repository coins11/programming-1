
ProgReport(p, l, exnum) =
	foreach(c => ..., $l)
		n = $p$c
		CProgram($n, $n)
		$n.tex : $n $n.input
			echo "\\section{課題$c}" > $n.tex
			runhaskell ../scripts/Generator.hs $n >> $n.tex
	body.tex : $(addprefix $p, $(addsuffix .tex, $l))
		cat $(addprefix $p, $(addsuffix .tex, $l)) > body.tex
	variables.tex :
		echo "\\newcommand{\exnum}[0]{$(exnum)}" > variables.tex
	report.tex : ../templates/report.tex
		cp ../templates/report.tex report.tex
	LATEX = platex --interaction=nonstopmode --kanji=utf8
	DVIPDFM = dvipdfmx
	TEXDEPS = body.tex variables.tex
	LaTeXDocument(report, report)

CFLAGS = -g -Wall

report.pdf : report.ps
	ps2pdf report.ps

ProgReport(q1_, 1 2 3, 1)

.DEFAULT : report.pdf
